<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="mobile-web-app-capable" content="yes">

  <!-- ‚úÖ SEO & Search Visibility -->
  <meta name="robots" content="index, follow">
  <meta name="description" content="Play Code Red: Survival - a fast-paced top-down survival shooter where you battle waves of enemies inside eerie backrooms mazes. Upgrade weapons, defeat bosses, and survive as long as possible.">
  <meta name="keywords" content="Code Red Survival, topdown shooter, survival game, browser shooter, HTML5 game, indie game, action shooter, maze survival, free web game">

  <!-- ‚úÖ Open Graph (social media sharing) -->
  <meta property="og:title" content="Code Red: Survival">
  <meta property="og:description" content="Fight waves of enemies in the Backrooms in this intense top-down shooter. Collect coins, upgrade your weapons, and survive!">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://code-red-survival.onrender.com/">
  <meta property="og:image" content="CODE_RED-SURVIVAL_logo">

  <!-- ‚úÖ Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Code Red: Survival - Backrooms Edition">
  <meta name="twitter:description" content="Fast-paced top-down survival shooter set in the mysterious Backrooms.">
  <meta name="twitter:image" content="https://code-red-survival.onrender.com/thumbnail.jpg">

  <!-- ‚úÖ Google Sign-In -->
  <meta name="google-signin-client_id" content="YOUR_CLIENT_ID.apps.googleusercontent.com">
  <script src="https://apis.google.com/js/platform.js" async defer></script>

  <!-- Favicon -->
  <link rel="icon" href="CODE_RED-SURVIVAL_logo.PNG" type="image/png">

  <title>Code Red: Survival - Backrooms Edition</title>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Arial', sans-serif;
      background: #0a0a0a;
      color: #fff;
      overflow: hidden;
      height: 100vh;
      width: 100vw;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      user-select: none;
      touch-action: none;
      position: fixed;
    }
    
    #game {
      display: block;
      background: #000;
      width: 100%;
      height: 100%;
      cursor: crosshair;
      outline: none;
      touch-action: none;
      -webkit-tap-highlight-color: transparent;
    }
    
    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.95);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    
    .dialog {
      background: #1a1a1a;
      border: 2px solid #00d9ff;
      border-radius: 12px;
      padding: 30px;
      max-width: 600px;
      min-width: 500px;
      text-align: center;
      box-shadow: 0 0 30px rgba(0, 217, 255, 0.3);
      position: relative;
    }
    
    h1 {
      color: #00d9ff;
      font-size: 42px;
      margin-bottom: 10px;
      text-shadow: 0 0 20px rgba(0, 217, 255, 0.5);
    }
    
    h2 {
      color: #00d9ff;
      font-size: 28px;
      margin-bottom: 15px;
    }
    
    p {
      color: #aaa;
      margin-bottom: 20px;
      line-height: 1.6;
    }
    
    button {
      background: linear-gradient(135deg, #00d9ff, #0099cc);
      color: #000;
      border: none;
      padding: 12px 30px;
      font-size: 16px;
      font-weight: bold;
      border-radius: 8px;
      cursor: pointer;
      margin: 5px;
      transition: all 0.3s;
      box-shadow: 0 4px 15px rgba(0, 217, 255, 0.3);
    }
    
    button:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(0, 217, 255, 0.5);
    }
    
    button:active {
      transform: translateY(-1px);
    }
    
    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }
    
    .difficulty-buttons {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin: 20px 0;
    }
    
    .difficulty-btn {
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
      border: 2px solid transparent;
      transition: all 0.3s;
    }
    
    .difficulty-btn:hover {
      background: rgba(255, 255, 255, 0.15);
      border-color: rgba(0, 217, 255, 0.5);
    }
    
    .difficulty-btn.active {
      border-color: #00d9ff;
      background: rgba(0, 217, 255, 0.25);
      box-shadow: 0 0 15px rgba(0, 217, 255, 0.4);
    }
    
    .toast {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: rgba(0, 0, 0, 0.95);
      border: 2px solid #00d9ff;
      padding: 15px 25px;
      border-radius: 10px;
      color: #fff;
      font-size: 16px;
      z-index: 10000;
      opacity: 0;
      transition: all 0.3s;
      backdrop-filter: blur(10px);
      box-shadow: 0 0 20px rgba(0, 217, 255, 0.5);
    }
    
    .toast.show {
      opacity: 1;
      transform: translateY(-10px);
    }

    .loading-bar {
      width: 320px;
      height: 10px;
      background: #222;
      border-radius: 5px;
      overflow: hidden;
      margin: 20px auto;
      border: 1px solid #444;
    }

    .loading-fill {
      height: 100%;
      background: linear-gradient(90deg, #00d9ff, #0099cc);
      width: 0%;
      transition: width 0.3s;
      box-shadow: 0 0 15px rgba(0, 217, 255, 0.8);
    }

    .shop-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin: 20px 0;
      max-width: 850px;
    }

    .shop-category {
      background: rgba(255, 255, 255, 0.03);
      padding: 15px;
      border-radius: 10px;
      border: 1px solid rgba(0, 217, 255, 0.2);
    }

    .shop-category h3 {
      margin-bottom: 15px;
      text-align: center;
    }

    .shop-item {
      background: rgba(255, 255, 255, 0.05);
      padding: 15px;
      border-radius: 8px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      margin-bottom: 10px;
      transition: all 0.3s;
    }

    .shop-item:hover {
      background: rgba(255, 255, 255, 0.08);
      border-color: rgba(0, 217, 255, 0.3);
      transform: translateY(-2px);
    }

    .shop-item h4 {
      color: #00d9ff;
      margin-bottom: 8px;
      font-size: 16px;
    }

    .shop-item p {
      font-size: 13px;
      margin-bottom: 10px;
      color: #ccc;
    }

    .shop-item button {
      width: 100%;
      padding: 8px;
      font-size: 14px;
    }

    .tutorial-content {
      text-align: left;
      max-height: 450px;
      overflow-y: auto;
      padding: 15px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 8px;
      margin: 15px 0;
    }

    .tutorial-content h3 {
      color: #00d9ff;
      margin-top: 15px;
      margin-bottom: 10px;
      font-size: 20px;
    }

    .tutorial-content ul {
      margin-left: 25px;
      margin-bottom: 15px;
    }

    .tutorial-content li {
      margin: 8px 0;
      color: #ddd;
      line-height: 1.6;
    }

    .stats-display {
      margin-top: 25px;
      padding-top: 20px;
      border-top: 1px solid rgba(0, 217, 255, 0.3);
      display: flex;
      justify-content: space-around;
      font-size: 15px;
    }

    .stat-item {
      text-align: center;
    }

    .stat-label {
      color: #888;
      font-size: 13px;
      margin-bottom: 5px;
    }

    .stat-value {
      color: #00d9ff;
      font-size: 22px;
      font-weight: bold;
    }
    
    .docs-section {
      margin-top: 30px;
      background: rgba(0, 217, 255, 0.1);
      border: 2px solid rgba(0, 217, 255, 0.3);
      border-radius: 8px;
      padding: 15px;
      max-width: 100%;
      backdrop-filter: blur(10px);
    }
    
    .docs-section h4 {
      color: #00d9ff;
      font-size: 18px;
      margin-bottom: 10px;
      text-align: center;
    }
    
    .docs-section p {
      color: #aaa;
      font-size: 13px;
      margin-bottom: 12px;
      line-height: 1.4;
      text-align: center;
    }
    
    .docs-link {
      display: block;
      text-align: center;
      padding: 10px 15px;
      background: linear-gradient(135deg, #00d9ff, #0099cc);
      color: #000;
      text-decoration: none;
      border-radius: 6px;
      font-weight: bold;
      font-size: 14px;
      transition: all 0.3s;
      box-shadow: 0 4px 15px rgba(0, 217, 255, 0.3);
    }
    
    .docs-link:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0, 217, 255, 0.5);
      background: linear-gradient(135deg, #00ff88, #00cc66);
    }
    
    .docs-link:active {
      transform: translateY(0);
    }

    .tutorial-content::-webkit-scrollbar {
      width: 8px;
    }

    .tutorial-content::-webkit-scrollbar-track {
      background: rgba(0, 0, 0, 0.3);
      border-radius: 4px;
    }

    .tutorial-content::-webkit-scrollbar-thumb {
      background: rgba(0, 217, 255, 0.5);
      border-radius: 4px;
    }

    .tutorial-content::-webkit-scrollbar-thumb:hover {
      background: rgba(0, 217, 255, 0.7);
    }
    #homeScreen .dialog,
#gameOverScreen .dialog,
#loginScreen .dialog {
  background: rgba(0, 0, 0, 0.8) url('CODE_RED-SURVIVAL_logo.PNG') center center no-repeat;
  background-size: contain;
  background-blend-mode: overlay;
  }
    /* Mobile Virtual Controls */
    .mobile-controls {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      display: none;
      z-index: 100;
      pointer-events: none;
    }
    
    .mobile-controls.active {
      display: block !important;
    }
    
    .virtual-joystick {
      position: absolute;
      bottom: 30px;
      left: 30px;
      width: 120px;
      height: 120px;
      background: rgba(255, 255, 255, 0.1);
      border: 2px solid rgba(0, 217, 255, 0.5);
      border-radius: 50%;
      pointer-events: all;
      touch-action: none;
    }
    
    .joystick-knob {
      position: absolute;
      width: 50px;
      height: 50px;
      background: rgba(0, 217, 255, 0.7);
      border: 2px solid #00d9ff;
      border-radius: 50%;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      transition: transform 0.1s;
    }
    
    .shoot-button {
      position: absolute;
      bottom: 30px;
      right: 30px;
      width: 100px;
      height: 100px;
      background: rgba(255, 51, 102, 0.3);
      border: 3px solid #ff3366;
      border-radius: 50%;
      pointer-events: all;
      touch-action: none;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      color: #fff;
      font-weight: bold;
    }
    
    .shoot-button:active {
      background: rgba(255, 51, 102, 0.6);
    }
    
    /* Responsive media queries */
    @media (max-width: 768px) {
      .dialog {
        width: 95%;
        min-width: unset;
        padding: 20px;
      }
      .docs-section {
        margin-top: 20px;
        max-width: 100%;
      }
      .shop-grid {
        grid-template-columns: 1fr;
      }
      .hud-item {
        font-size: 12px;
      }
      .mobile-controls {
        display: block;
      }
    }
    
    @media (max-height: 600px) {
      .dialog {
        transform: scale(0.9);
      }
    }
    
    @media (hover: none) and (pointer: coarse) {
      /* Mobile devices */
      .mobile-controls {
        display: block;
      }
    }
  </style>
</head>

w<body>
  <canvas id="game"></canvas>
  
  <div class="hud">
    <div class="hud-item">
      <strong>‚ù§Ô∏è HEALTH</strong>
      <div class="health-bar">
        <div id="healthBar" class="health-fill" style="width: 100%;"></div>
      </div>
    </div>
    <div class="hud-item" id="armorDisplay" style="display: none;">
      <strong>üõ°Ô∏è ARMOR</strong>
      <div class="health-bar" style="background: #333;">
        <div id="armorBar" class="health-fill" style="background: linear-gradient(90deg, #666, #999); width: 0%;"></div>
      </div>
    </div>
    <div class="hud-item">
      <span>ü™ô <strong>Coins</strong></span>
      <span id="coinCount" style="color: #ffdd00; font-weight: bold;">0</span>
    </div>
    <div class="hud-item">
      <span>üíé <strong>Gems</strong></span>
      <span id="gemCount" style="color: #00ff88; font-weight: bold;">0</span>
    </div>
    <div class="hud-item">
      <span>üî¥ <strong>Red Gems</strong></span>
      <span id="redGemCount" style="color: #ff4444; font-weight: bold;">0</span>
    </div>
    <div class="hud-item">
      <span>üåà <strong>Rainbow</strong></span>
      <span id="rainbowCrystalCount" style="color: #ff00ff; font-weight: bold;">0</span>
    </div>
    <div class="hud-item">
      <span>üî´ <strong>Weapon</strong></span>
      <span id="currentWeapon" style="color: #ff6600; font-weight: bold;">Pistol</span>
    </div>
    <button id="shopButton" style="position: fixed; top: 20px; right: 20px; padding: 12px 20px; background: linear-gradient(135deg, #ffdd00, #ffaa00); color: #000; border: 2px solid #ffaa00; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 16px; z-index: 500; transition: all 0.3s; box-shadow: 0 4px 15px rgba(255, 221, 0, 0.4);">
      üõí SHOP (F)
    </button>
  </div>
  
  <div id="homeScreen" class="overlay">
    <div class="dialog">
      <h1>‚ö†Ô∏è CODE RED ‚ö†Ô∏è</h1>
      <p style="color: #00d9ff; margin-bottom: 5px;">v1.0.75</p>
      <h2>SURVIVAL</h2>
      <p style="color: #00d9ff; font-size: 16px;">Backrooms Edition</p>
      
      <h3 style="color: #00d9ff; margin-top: 25px; margin-bottom: 15px;">üéØ Select Difficulty</h3>
      <div class="difficulty-buttons">
        <button class="difficulty-btn" data-difficulty="Easy">üòä Easy</button>
        <button class="difficulty-btn active" data-difficulty="Normal">üòê Normal</button>
        <button class="difficulty-btn" data-difficulty="Hard">üò∞ Hard</button>
        <button class="difficulty-btn" data-difficulty="Nightmare">üíÄ Nightmare</button>
      </div>
      
      <div style="margin: 25px 0;">
        <button id="startGameBtn" style="font-size: 18px; padding: 15px 40px;">üéÆ START GAME</button>
        <button id="tutorialBtn">üìñ Tutorial</button>
      </div>
      
      <div style="margin: 10px 0;">
        <button id="multiplayerBtn">üéÆ Multiplayer</button>
        <button id="leaderboardBtn">üèÜ Leaderboard</button>
        <button id="customizeBtn">üé® Customize</button>
        <button id="upgradesBtn">‚≠ê Upgrades</button>
        <button id="controlsBtn">‚å®Ô∏è Controls</button>
        <button id="promoBtn">üéüÔ∏è Promo Codes</button>
        <button id="logoutBtn">üö™ Logout</button>
      </div>
      
      <div class="stats-display">
        <div class="stat-item">
          <div class="stat-label">Best Wave</div>
          <div class="stat-value" id="bestWaveHome">ZS0</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">Total Coins</div>
          <div class="stat-value" id="totalCoinsHome" style="color: #ffdd00;">0</div>
        </div>
      </div>
      
      <div class="docs-section">
        <h4>üìö DOCS</h4>
        <p>You can view the changelog, about me and more at this link</p>
        <a href="https://code-red-survival-docs.onrender.com/#" target="_blank" class="docs-link">View Documentation</a>
      </div>
      
      <h3 style="position: absolute; bottom: 20px; left: 20px; color: #888; font-size: 16px; margin: 0;">Made by Shivank Mishra</h3>
    </div>
  </div>
  
  <div id="tutorialScreen" class="overlay" style="display: none;">
    <div class="dialog" style="max-width: 750px;">
      <h2>üõ°Ô∏è How to Survive</h2>
      <div class="tutorial-content">
        <h3>üéÆ Controls</h3>
        <ul>
          <li><strong>W/A/S/D</strong> or <strong>Arrow Keys</strong> - Move through the maze</li>
          <li><strong>Mouse</strong> - Aim your weapon</li>
          <li><strong>Left Click</strong> or <strong>Spacebar</strong> - Shoot</li>
          <li><strong>Q</strong> - Switch between unlocked weapons</li>
          <li><strong>F</strong> - Open shop (spend coins on upgrades!)</li>
          <li><strong>Shift</strong> - Sprint (40% faster movement)</li>
          <li><strong>P</strong> - Pause game</li>
        </ul>
        
        <h3>üéØ How to Play</h3>
        <ul>
          <li>Navigate through procedurally generated backrooms-style mazes</li>
          <li>Press <strong>SPACE</strong> to start each wave</li>
          <li>Survive against increasingly difficult waves of enemies</li>
          <li>Collect coins (ü™ô) and gems (üíé) dropped by defeated enemies</li>
          <li>Press <strong>F</strong> to open the shop and buy powerful upgrades</li>
          <li>Unlock new weapons and build your perfect loadout</li>
          <li>Boss waves appear every 10 waves - prepare for battle!</li>
        </ul>
        
        <h3>üëæ Enemy Types</h3>
        <ul>
          <li><strong style="color: #ff3366;">Basic (Red)</strong> - Standard enemy, chases you directly</li>
          <li><strong style="color: #ff6633;">Ranged (Orange)</strong> - Keeps distance and shoots projectiles</li>
          <li><strong style="color: #ff33ff;">Fast (Purple)</strong> - 50% faster movement speed</li>
          <li><strong style="color: #ff9900;">Suicide (Yellow)</strong> - Rushes you and explodes on contact (18 damage!)</li>
          <li><strong style="color: #aa0000;">Boss (Dark Red)</strong> - Appears every 10 waves, fires 6-way bullet spread</li>
        </ul>
        
        <h3>üî´ Weapons</h3>
        <ul>
          <li><strong>Pistol</strong> - 18 damage, 0.22s cooldown, accurate (unlocked by default)</li>
          <li><strong>Shotgun</strong> - 10 damage √ó 5 pellets, 0.85s cooldown, wide spread (150 coins)</li>
          <li><strong>Burst Rifle</strong> - 12 damage √ó 3 bullets, 0.45s cooldown, medium spread (200 coins)</li>
          <li><strong>Sniper</strong> - 75 damage, 0.9s cooldown, single shot (400 coins)</li>
          <li><strong>Railgun</strong> - ULTIMATE! Spins 8 lasers, infinite damage to all enemies, 60s cooldown (700 gems)</li>
        </ul>
        
        <h3>üíé Permanent Upgrades & Gems</h3>
        <ul>
          <li><strong>Red Gems</strong> - Premium currency dropped by enemies</li>
          <li><strong>Drop Rates</strong>: 50% = 1 gem, 25% = 4 gems, 2.5% = 400 gems, 0.0000000067% = 600,000 gems!</li>
          <li><strong>Permanent Upgrades</strong> - All upgrades are permanent! Speed, Armor, Damage, Health, etc.</li>
          <li><strong>Unlocked Weapons</strong> - Once purchased, weapons stay unlocked forever</li>
          <li><strong>Exchange Rate</strong> - Sell gems for coins or use gems for premium upgrades</li>
        </ul>
        
        <h3>üí° Pro Tips</h3>
        <ul>
          <li><strong>Use walls as cover</strong> - Ranged enemies can't shoot through walls</li>
          <li><strong>Check the minimap</strong> - Bottom right shows walls, enemies, and your position</li>
          <li><strong>Upgrade early</strong> - Max HP and armor are crucial for later waves</li>
          <li><strong>Don't get cornered</strong> - Always leave yourself an escape route</li>
          <li><strong>Manage spawns</strong> - Enemies spawn slowly (every 5 seconds), max 15 at once</li>
          <li><strong>Sprint strategically</strong> - Hold Shift to move 40% faster</li>
          <li><strong>Boss strategy</strong> - Use corridors to funnel bosses and dodge their attacks</li>
        </ul>
      </div>
      <div style="margin-top: 20px;">
        <button id="tutorialBackBtn">‚Üê Back</button>
        <button id="tutorialStartBtn" style="font-size: 18px; padding: 12px 35px;">üéÆ START PLAYING!</button>
      </div>
    </div>
  </div>
  
  <div id="pauseScreen" class="overlay" style="display: none;">
    <div class="dialog">
      <h2>‚è∏Ô∏è Paused</h2>
      <p>Take a breather, the backrooms can wait...</p>
      <button id="resumeBtn" style="font-size: 18px; padding: 12px 30px;">‚ñ∂Ô∏è Resume</button>
      <button id="mainMenuBtn">üè† Main Menu</button>
    </div>
  </div>
  
  <div id="gameOverScreen" class="overlay" style="display: none;">
    <div class="dialog">
      <h2 style="color: #ff3366;">üíÄ GAME OVER üíÄ</h2>
      <p style="color: #ccc;">You didn't make it out of the backrooms...</p>
      <div style="margin: 25px 0; font-size: 18px;">
        <div style="margin: 12px 0; padding: 10px; background: rgba(0,217,255,0.1); border-radius: 8px;">
          <strong style="color: #888;">Wave Reached:</strong> 
          <span id="finalWave" style="color: #00d9ff; font-weight: bold; font-size: 24px;">0</span>
        </div>
        <div style="margin: 12px 0; padding: 10px; background: rgba(255,51,102,0.1); border-radius: 8px;">
          <strong style="color: #888;">Enemies Defeated:</strong> 
          <span id="finalKills" style="color: #ff3366; font-weight: bold; font-size: 24px;">0</span>
        </div>
        <div style="margin: 12px 0; padding: 10px; background: rgba(255,221,0,0.1); border-radius: 8px;">
          <strong style="color: #888;">Coins Earned:</strong> 
          <span id="finalCoins" style="color: #ffdd00; font-weight: bold; font-size: 24px;">0</span>
        </div>
      </div>
      <button id="restartBtn" style="font-size: 18px; padding: 12px 30px;">üîÑ Play Again</button>
      <button id="gameOverMenuBtn">üè† Main Menu</button>
    </div>
  </div>
  
  <div id="shopScreen" class="overlay" style="display: none;">
    <div class="dialog" style="max-width: 1200px; max-height: 90vh; overflow-y: auto;">
      <h2>üõí In-Game Shop</h2>
      <p style="font-size: 20px; margin-bottom: 20px;">
        Your Coins: <span id="shopCoins" style="color: #ffdd00; font-weight: bold; font-size: 24px;">0</span> ü™ô
        &nbsp;&nbsp;|&nbsp;&nbsp;
        Your Green Gems: <span id="shopGems" style="color: #00ff88; font-weight: bold; font-size: 24px;">0</span> üíé
      </p>
      
      <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 12px; margin-bottom: 20px;">
        <div id="weaponsUpgradesShop" style="grid-column: 1 / -1; display: contents;"></div>
        <div id="offenseUpgrades" style="grid-column: 1 / -1; display: contents;"></div>
        <div id="defenseUpgrades" style="grid-column: 1 / -1; display: contents;"></div>
        <div id="utilityUpgrades" style="grid-column: 1 / -1; display: contents;"></div>
      </div>
      
      <button id="shopCloseBtn" style="margin-top: 20px; font-size: 16px; padding: 10px 25px;">‚úñÔ∏è Close Shop</button>
    </div>
  </div>
  
  <div id="customizeScreen" class="overlay" style="display: none;">
    <div class="dialog" style="max-width: 1000px; max-height: 90vh; overflow-y: auto;">
      <h2>üé® Character Customization</h2>
      <p style="font-size: 16px; color: #ccc; margin-bottom: 20px;">
        Your Red Gems: <span id="customizeRedGems" style="color: #ff4444; font-weight: bold; font-size: 20px;">0</span> üî¥
      </p>
      
      <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 20px;">
        <div>
          <h3 style="color: #00ff88; margin-bottom: 15px;">Primary Colors (Free)</h3>
          <div id="primaryColors" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;"></div>
        </div>
        <div>
          <h3 style="color: #ff4444; margin-bottom: 15px;">Secondary Colors (50 üî¥ each)</h3>
          <div id="secondaryColors" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;"></div>
        </div>
      </div>
      
      <div style="background: rgba(0,217,255,0.1); padding: 15px; border-radius: 8px; margin-bottom: 20px; text-align: left;">
        <h3 style="color: #00d9ff; margin-bottom: 10px;">Preview</h3>
        <canvas id="colorPreview" width="100" height="100" style="background: rgba(0,0,0,0.3); border: 2px solid #00d9ff; border-radius: 8px;"></canvas>
      </div>
      
      <button id="customizeCloseBtn" style="margin-top: 20px; font-size: 16px; padding: 10px 25px;">‚úñÔ∏è Close</button>
    </div>
  </div>
  
  <div id="upgradesScreen" class="overlay" style="display: none;">
    <div class="dialog" style="max-width: 1200px; max-height: 90vh; overflow-y: auto;">
      <h2>‚≠ê Permanent Upgrades</h2>
      <p style="font-size: 18px; color: #ccc; margin-bottom: 20px;">
        Your Red Gems: <span id="upgradesRedGems" style="color: #ff4444; font-weight: bold; font-size: 22px;">0</span> üî¥
        &nbsp;&nbsp;|&nbsp;&nbsp;
        Your Rainbow Crystals: <span id="upgradesRainbowCrystals" style="color: #ff00ff; font-weight: bold; font-size: 22px;">0</span> üåà
      </p>
      <p style="font-size: 14px; color: #aaa; margin-bottom: 20px;">These upgrades are PERMANENT and carry over to ALL future games!</p>
      
      <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 12px; margin-bottom: 20px;">
        <div id="weaponsUpgrades" style="grid-column: 1 / -1; display: contents;"></div>
        <div id="permanentDefenseUpgrades" style="grid-column: 1 / -1; display: contents;"></div>
        <div id="permanentUtilityUpgrades" style="grid-column: 1 / -1; display: contents;"></div>
        <div id="rainbowWeaponsUpgrades" style="grid-column: 1 / -1; display: contents;"></div>
      </div>
      
      <button id="upgradesCloseBtn" style="margin-top: 20px; font-size: 16px; padding: 10px 25px;">‚úñÔ∏è Close</button>
    </div>
  </div>
  
  <div id="controlsScreen" class="overlay" style="display: none;">
    <div class="dialog" style="max-width: 800px; max-height: 90vh; overflow-y: auto;">
      <h2>‚å®Ô∏è Control Remapping</h2>
      <p style="font-size: 14px; color: #aaa; margin-bottom: 20px;">Click a button and press the key you want to use</p>
      
      <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 20px;">
        <div>
          <label style="color: #00ff88; font-weight: bold; margin-bottom: 5px; display: block;">Move Up</label>
          <button id="remapMoveUp" style="width: 100%; padding: 10px; font-size: 16px;">W</button>
        </div>
        <div>
          <label style="color: #00ff88; font-weight: bold; margin-bottom: 5px; display: block;">Move Down</label>
          <button id="remapMoveDown" style="width: 100%; padding: 10px; font-size: 16px;">S</button>
        </div>
        <div>
          <label style="color: #00ff88; font-weight: bold; margin-bottom: 5px; display: block;">Move Left</label>
          <button id="remapMoveLeft" style="width: 100%; padding: 10px; font-size: 16px;">A</button>
        </div>
        <div>
          <label style="color: #00ff88; font-weight: bold; margin-bottom: 5px; display: block;">Move Right</label>
          <button id="remapMoveRight" style="width: 100%; padding: 10px; font-size: 16px;">D</button>
        </div>
        <div>
          <label style="color: #ffaa00; font-weight: bold; margin-bottom: 5px; display: block;">Switch Weapon</label>
          <button id="remapSwitchWeapon" style="width: 100%; padding: 10px; font-size: 16px;">Q</button>
        </div>
        <div>
          <label style="color: #ffaa00; font-weight: bold; margin-bottom: 5px; display: block;">Open Shop</label>
          <button id="remapShop" style="width: 100%; padding: 10px; font-size: 16px;">F</button>
        </div>
        <div>
          <label style="color: #ff6600; font-weight: bold; margin-bottom: 5px; display: block;">Sprint</label>
          <button id="remapSprint" style="width: 100%; padding: 10px; font-size: 16px;">Shift</button>
        </div>
      </div>
      
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="resetControlsBtn" style="flex: 1; padding: 10px; font-size: 14px; background: #ff4444;">Reset to Defaults</button>
        <button id="controlsCloseBtn" style="flex: 1; padding: 10px; font-size: 14px;">‚úñÔ∏è Close</button>
      </div>
    </div>
  </div>
  
  <div id="promoScreen" class="overlay" style="display: none;">
    <div class="dialog" style="max-width: 600px; max-height: 90vh; overflow-y: auto;">
      <h2>üé´ Redeem Promo Code</h2>
      <p style="color: #aaa;">Enter your promo code to claim rewards. Codes are one-time use.</p>
      <div style="display:flex;gap:10px;margin-top:12px;">
        <input id="promoInput" type="text" placeholder="Enter code" style="flex:1;padding:10px;font-size:16px;" />
        <button id="promoRedeemBtn" style="padding:10px 16px;">Redeem</button>
      </div>
      <div id="promoMessage" style="margin-top:12px;color:#ffdd00;font-weight:bold;"></div>
      <div style="display:flex;gap:10px;margin-top:20px;">
        <button id="promoCloseBtn" style="flex:1;padding:10px;">‚úñÔ∏è Close</button>
      </div>
    </div>
  </div>

  <div id="multiplayerScreen" class="overlay" style="display: none;">
    <div class="dialog" style="max-width: 600px;">
      <h2>üåê Global Multiplayer</h2>
      <p style="color: #aaa; margin-bottom: 20px;">Play with friends on the same internet!</p>
      
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
        <button id="createGameBtn" style="font-size: 16px; padding: 15px 20px; background: linear-gradient(135deg, #00ff88, #00cc66);">
          ‚ûï Create Game
        </button>
        <button id="joinGameBtn" style="font-size: 16px; padding: 15px 20px; background: linear-gradient(135deg, #ffaa00, #ff6600);">
          üîó Join Game
        </button>
      </div>

      <div id="createGamePanel" style="display: none; margin-bottom: 20px;">
        <h3 style="color: #00d9ff; margin-bottom: 15px;">Create New Game</h3>
        <p style="color: #aaa; font-size: 14px; margin-bottom: 10px;">Your game code will be generated automatically</p>
        <button id="confirmCreateBtn" style="width: 100%; padding: 12px; font-size: 16px; margin-bottom: 10px;">
          ‚ú® Create & Start Waiting
        </button>
        <div id="gameCodeDisplay" style="display: none; text-align: center; padding: 20px; background: rgba(0,217,255,0.1); border-radius: 8px; margin-bottom: 10px;">
          <p style="color: #aaa; font-size: 14px; margin-bottom: 10px;">Your Game Code:</p>
          <p id="gameCode" style="color: #00d9ff; font-size: 36px; font-weight: bold; font-family: monospace; letter-spacing: 5px; margin: 0;">----</p>
          <p style="color: #888; font-size: 12px; margin-top: 10px;">Share this code with your friend!</p>
        </div>
      </div>

      <div id="joinGamePanel" style="display: none; margin-bottom: 20px;">
        <h3 style="color: #00d9ff; margin-bottom: 15px;">Join Existing Game</h3>
        <p style="color: #aaa; font-size: 14px; margin-bottom: 10px;">Enter the 4-letter code from your friend</p>
        <input 
          id="joinCodeInput" 
          type="text" 
          placeholder="e.g., AB12" 
          maxlength="4"
          style="
            width: 100%;
            padding: 12px;
            font-size: 18px;
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid #00d9ff;
            border-radius: 8px;
            color: #fff;
            text-align: center;
            letter-spacing: 3px;
            font-family: monospace;
            font-weight: bold;
            margin-bottom: 10px;
            box-shadow: 0 0 15px rgba(0, 217, 255, 0.3);
            outline: none;
          "
        />
        <button id="confirmJoinBtn" style="width: 100%; padding: 12px; font-size: 16px;">
          üéÆ Join Game
        </button>
      </div>

      <div id="waitingPanel" style="display: none; text-align: center; padding: 20px;">
        <h3 style="color: #00d9ff; margin-bottom: 15px;">‚è≥ Waiting for Player...</h3>
        <div style="margin: 20px 0;">
          <div style="display: inline-block; width: 40px; height: 40px; border: 4px solid #00d9ff; border-top-color: transparent; border-radius: 50%; animation: spin 1s linear infinite;"></div>
        </div>
        <p id="waitingText" style="color: #aaa; margin-bottom: 15px;">Waiting for another player to join...</p>
        <p id="waitingCode" style="color: #00d9ff; font-size: 24px; font-weight: bold; font-family: monospace; margin-bottom: 15px;">----</p>
        <button id="cancelWaitBtn" style="width: 100%; padding: 12px; font-size: 16px; background: #ff3366;">
          ‚úñÔ∏è Cancel
        </button>
      </div>

      <div style="margin-top: 20px;">
        <button id="multiplayerCloseBtn" style="width: 100%; padding: 12px; font-size: 16px;">‚Üê Back to Menu</button>
      </div>
    </div>
  </div>

  <style>
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>

  <div id="toast" class="toast"></div>
  
  <div id="loginScreen" class="overlay" style="display: flex;">
    <div class="dialog" style="max-width: 450px;">
      <h1>‚ö†Ô∏è CODE RED ‚ö†Ô∏è</h1>
      <h2>SURVIVAL</h2>
      <p style="color: #00d9ff; font-size: 16px; margin-bottom: 30px;">Backrooms Edition</p>
      
      <h3 style="color: #00d9ff; margin-bottom: 20px;">üéÆ Enter Your Name to Begin</h3>
      <p style="color: #aaa; font-size: 14px; margin-bottom: 20px;">Your name will be used for the global leaderboard</p>
      
      <input 
        type="text" 
        id="loginInput" 
        placeholder="Enter your name..." 
        maxlength="20"
        style="
          width: 100%;
          padding: 15px;
          font-size: 18px;
          background: rgba(0, 0, 0, 0.5);
          border: 2px solid #00d9ff;
          border-radius: 8px;
          color: #fff;
          font-family: Arial, sans-serif;
          margin-bottom: 20px;
          box-shadow: 0 0 15px rgba(0, 217, 255, 0.3);
          outline: none;
        "
      />
      
      <button 
        id="loginSubmitBtn" 
        style="font-size: 18px; padding: 15px 40px; width: 100%;"
      >
        ‚ú® START PLAYING ‚ú®
      </button>
    </div>
  </div>
  
  <div id="loadingScreen" class="overlay" style="display: none;">
    <div class="dialog">
      <h2>üéÆ Loading Game...</h2>
      <div class="loading-bar">
        <div id="loadingProgress" class="loading-fill"></div>
      </div>
      <p id="loadingText" style="color: #00d9ff; font-size: 18px; font-weight: bold;">0%</p>
      <p style="font-size: 14px; color: #888; margin-top: 10px;">Generating backrooms maze...</p>
    </div>
  </div>

  <!-- Mobile Virtual Controls -->
  <div id="mobileControls" class="mobile-controls">
    <div id="virtualJoystick" class="virtual-joystick">
      <div id="joystickKnob" class="joystick-knob"></div>
    </div>
    <div id="shootButton" class="shoot-button">üî´</div>
  </div>

  <!-- Supabase Client Library -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="promo_codes.js"></script>
  <script src="multiplayer.config.js"></script>
  <script src="multiplayer_client.js"></script>
  <script src="game.js"></script>
</body>
</html>